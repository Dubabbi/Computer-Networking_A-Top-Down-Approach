# DNS: 인터넷의 디렉터리 서비스

인터넷 호스트의 식별자 중 하나는 `www.facebook.com`, `www.google.com` 등의 **호스트 이름(host name)**이다.

그러나 호스트의 이름은 인터넷에서의 호스트 위치에 대한 정보를 거의 제공하지 않는다. 또한, 가변 길이의 알파뉴메릭 문자로 구성되므로 라우터가 처리하는 데 어려움이 있다.

이러한 이유로 호스트는 흔히 말하는 **IP 주소**로 식별된다.

### IP 주소

IP주소는 4 바이트로 구성되고, 계층구조를 갖는다.

121.7.106.83과 같은 형태로 0~255의 십진수로 표현하는 각 바이트는 점으로 구분한다.

계층구조여서 왼쪽에서 오른쪽으로 조사함으로써, 그 호스트가 인터넷의 어디에 위치하는지에 대한 자세한 정보를 얻을 수 있더.

(더 자세히는 4장에서 논의한다.)

<br/><br/>

## DNS가 제공하는 서비스

사람은 호스트 네임을 선호하지만 라우터는 고정 길이의 계층구조를 가진 IP주소를 선호한다.

이 차이를 절충하기 위해 호스트 이름을 IP 주소로 변환해주는 디렉터리 서비스가 필요하다. 이 서비스가 인터넷 **DNS(Domain name system)** 의 주요 임무다.

**DNS란**
1. DNS 서버들의 계층구조로 구현된 분산 데이터 베이스이다.
2. 호스트가 분산 데이터 베이스로 질의하도록 허락하는 애플리케이션 계층 프로토콜이다.

DNS 서버는 주로 BIND(Berkeley Internet Name Domain) 소프트웨어를 수행하는 유닉스 컴퓨터다.

DNS 프로토콜은 UDP 상에서 수행되고 포트 번호 53을 이용한다.

<br/><br/>

참고 : DNS가 UDP를 사용하는 이유

1. 빠른 속도

TCP의 경우 데이터 전송 시작 전에 3-way-handshaking 과정이 있는 반면 UDP는 연결 설정에 드는 비용이 없다. DNS는 신뢰성보다 속도가 더 중요한 서비스이기 때문에 TCP보다 UDP가 더 적합하다.
또한, UDP는 512 bytes를 넘어가지 않는 패킷만 전송이 가능하고 오버헤드가 없어서 속도가 빠른데, DNS가 전송하는 데이터 패킷 사이즈가 매우 작으므로 UDP가 유리하다. 이때 단순히 패킷의 사이즈가 작다고 DNS가 UDP를 채택한 것은 아니고, 전달하는 패킷의 크기가 작기 때문에 신뢰성이 보장되지 않아도 되기 때문이다. (못 받으면 다시 전달하면 된다.)

2. 연결 상태를 유지할 필요가 없다.

TCP는 호스트 간의 연결 상태를 유지한다. 이때 TCP의 패킷 안에는 여러 정보가 담겨 있지만, UDP는 어떤 정보도 기록하지 않고, 유지할 필요도 없다. DNS 서버는 TCP보다 많은 클라이언트를 수용할 수 있으므로 연결 상태를 유지하지 않고 정보 기록을 최소화할 수 있는 UDP를 채택하였다.


### 사용자의 호스트에서 수행하는 브라우저가 URL을 검색했을 때 발생하는 일
1. 같은 사용자 컴퓨터는 DNS 애플리케이션의 클라이언트를 수행한다.
2. 브라우저는 URL로부터 호스트 이름 을 추출하고 그 호스트 이름을 DNS 애플리케이션의 클리언트에 보낸다.
3. DNS 클라이언트는 DNS 서버로 호스트 이름을 포함하는 질의를 보낸다.
4. DNS 클라이언트는 결국 호스트 이름에 대한 IP 주소를 받게된다.
5. 브라우저가 DNS로부터 IP 주소를 받으면, 브라우저는 해당 IP 주소와 그 주소의 80번 포트에 위치하는 HTTP 서버 프로세스로 TCP 연결을 초기화한다.

